//-----------------------------------------------------------------------------
// Requires
//-----------------------------------------------------------------------------
import {StyleRoot} from 'radium';

var React = require('react');
var Radium = require('radium');

var contentStore = require('../stores/contentStore');
var contentActions = require('../actions/contentActions');

var Header = require('./Content/Header.jsx');
var ContentContainer = require('./Content/ContentContainer.jsx');

//-----------------------------------------------------------------------------
// Module
//-----------------------------------------------------------------------------
var Content = React.createClass({
	//---------------------------------------------------------------------------
	// Display Name
	//---------------------------------------------------------------------------

	displayName: 'Content',

	//---------------------------------------------------------------------------
	// Prop Types
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Mixins
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Statics
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Get Initial State
	//---------------------------------------------------------------------------

	getInitialState: function() {
        return {
        	content: false
        };
    },

	//---------------------------------------------------------------------------
	// Get Default Props
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Component Will Mount
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Component Did Mount
	//---------------------------------------------------------------------------

    componentDidMount: function() {
        contentStore.addChangeListener(this._onChange);
        contentActions.fetchInitial();
    },

	//---------------------------------------------------------------------------
	// Component Will Recieve Props
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Should Component Update
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Component Will Update
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Component Did Update
	//---------------------------------------------------------------------------

	//---------------------------------------------------------------------------
	// Component Will Unmount
	//---------------------------------------------------------------------------

    componentWillUnmount: function() {
        contentStore.removeChangeListener(this._onChange);
    },

    //---------------------------------------------------------------------------
    // On Change
    //---------------------------------------------------------------------------

    _onChange: function() {
      this.setState({
          content: contentStore.getContent()
      });
    },

    //---------------------------------------------------------------------------
    // Handle Change Content
    //---------------------------------------------------------------------------

    handleChangeContent: function(changes) {
        contentActions.changeContent(changes);
    },

    //---------------------------------------------------------------------------
    // Style
    //---------------------------------------------------------------------------

    style: function() {
        var style = {
            section: {

            }
        };

        return style;
    },

	//---------------------------------------------------------------------------
	// Render
	//---------------------------------------------------------------------------
	render: function() {

        if(this.state.content) {

            var style = this.style();

            return (
                <StyleRoot>
                    <section id="content" style={style.section}>
                        <Header
                            handleChangeContent={this.handleChangeContent}
                        />
                        <ContentContainer
                            content={this.state.content}
                            handleChangeContent={this.handleChangeContent}
                        />
                    </section>
                </StyleRoot>
            )
        }
        else {
            return (
                <section id="content">
                </section>
            )
        }  
    }
	
});
	
//-----------------------------------------------------------------------------
// Export
//-----------------------------------------------------------------------------
module.exports = Radium(Content);